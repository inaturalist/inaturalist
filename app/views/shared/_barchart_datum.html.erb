<%- 
  value_width = max == 0 ? 0 : (value.to_f / max * 100).to_i
  remainder_width = 100 - value_width
  min_value_label_width ||= 10
  min_remainder_label_width ||= 25
  label_text ||= '&nbsp;'
-%>
<div class="datum">
  <div class="value" style="width: <%= value_width %>%">
    <div class="label">
      <% if value_width > min_value_label_width -%>
          <%= value -%>
          <% if remainder_width < min_remainder_label_width -%>
            <%= value == 1 ? label_text.singularize : label_text -%>
          <% end -%>
      <% else %>
        &nbsp;
      <% end -%>
    </div>
  </div>
  <div class="remainder" style="width: <%= remainder_width %>%">
    <div class="label">
      <%- if value_width <= min_value_label_width -%>
        <%= value -%>
      <%- end -%>
      <%- if remainder_width >= min_remainder_label_width -%>
        <%= value == 1 ? label_text.singularize : label_text -%>
      <%- else %>
        &nbsp;
      <%- end -%>
    </div>
  </div>
</div>
