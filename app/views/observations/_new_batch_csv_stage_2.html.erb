<% unless @hasInvalid %>
<div id="batchformcol" class="column span-24">
  <%= render(:partial => 'batch_form_row') %>
</div>
<% end %>
<%= form_tag(
  {:controller => 'observations', :action => 'create'}, 
  :class => 'observationform') do %>

  <% unless @hasInvalid %>
    <div class="column span-24 headers">
      <div class="column span-1">
        &nbsp;
      </div>
      <div class="column span-7">
        <label><%=t :what %></label>
      </div>
      <div class="column span-7">
        <label><%=t :when %></label>
      </div>
      <div class="last column span-7">
        <label><%=t :where %></label>
      </div>
    </div>
    <div id="batchcol">
      <%= render :partial => 'observations/observation_form_field_rows' %>
    </div>
    <div class="column span-24">
      <div id="observation_form_links" class="buttonrow">
        <%= submit_tag "Save All", :class => 'default button', 'data-loading-click' => 'Saving...' -%>
      </div>
    </div>
  <% else %>
    <div class="column span-24">
      <div class="error">
        <%=t :there_were_some_problems_with %>
      </div>
      <%= render :partial => 'observations/observation_csv_parse_errors' %>
      <div class="column span-24">
        <div id="observation_form_links" class="buttonrow">
          <%= link_to t(:back_to_import), :action => 'import' -%>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
