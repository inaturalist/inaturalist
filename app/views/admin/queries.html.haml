- content_for :extrajs do
  :javascript
    $( function( ) {
      $( ".kill a" ).each( function( ) {
        var link = $( this );
        var validation = $( "<p/>" ).append(
          $( "<input type='text' id='comfirm_validation' />" )
        );
        link.confirmModal( {
          additionalContent: validation,
          text: function( ) {
            return "Are you sure you want to kill this query? Type \"yes\" to continue:";
          },
          confirmValidation: function( ) {
            return $( "#comfirm_validation" ).val( ) === "yes";
          },
          onConfirm: function( ) {
            window.location = link.data( "url" );
          }
        } );
      } );
    } );

- content_for :extrajs do
  :javascript
    $(function( ) {
      $( "#queryTabs a" ).click(function ( e ) {
        e.preventDefault( );

        $( "#queryTabs a" ).removeClass( "active" );
        $( ".tab-pane" ).removeClass( "show active" );
        
        $( this ).addClass( "active" );
        var target = $( this ).attr( "href" );
        $( target ).addClass( "show active" );
      } );
    } );

%h2.sub-header= "Active Queries"

%ul.nav.nav-tabs#queryTabs
  %li.nav-item
    %a.nav-link.active{href: "#primary_queries"} Primary Queries (#{@primary_queries.count})
  %li.nav-item
    %a.nav-link{href: "#replica_queries"} Replica Queries (#{@replica_queries.count})

.tab-content.mt-3
  %div.tab-pane.fade.show.active#primary_queries
    %h3 Primary Queries (#{@primary_queries.count})
    %table.table.table-striped
      %thead
        %tr
          %th Timing
          %th Info
      %tbody
        - @primary_queries.each do | query |
          %tr
            %td
              %strong Duration:
              %br
              = human_duration(query["duration"]) if query["duration"]
              %br
              %br
              %strong State Changed:
              %br
              = time_ago_in_words(query["state_change"]) if query["state_change"]
            %td
              - query.each do |k,v|
                %strong= "#{ k }:"
                = v
                %br

  %div.tab-pane.fade#replica_queries
    %h3 Replica Queries (#{@replica_queries.count})
    %table.table.table-striped
      %thead
        %tr
          %th Timing
          %th Info
      %tbody
        - @replica_queries.each do | query |
          %tr
            %td
              %strong Duration:
              %br
              = human_duration(query["duration"]) if query["duration"]
              %br
              %br
              %strong State Changed:
              %br
              = time_ago_in_words(query["state_change"]) if query["state_change"]
            %td
              - query.each do |k,v|
                %strong= "#{ k }:"
                = v
                %br
